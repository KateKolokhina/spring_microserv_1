<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>BeautyShop.com</title>
    <link
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
            crossorigin="anonymous"
    />
    <link
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
            crossorigin="anonymous"
    />
</head>

<body style="padding-top: 100px">
<div th:replace="navbar :: navbar">
</div>

<main role="main">
    <div class="d-flex justify-content-center align-items-center">
        <div class="row" style="width: 60%">
            <div class="col-md-12">
                <a class="btn btn-primary" href="/user/all" role="button">Усі користувачі</a>
                <div class="card w-100 my-4">
                    <div class="card-header bg-light text-info">
                        <h4 class="text-center">Створити користувача</h4>
                    </div>
                    <div class="card-body" style="width:auto">
                        <form action="#" th:action="@{'/user/add'}" th:object="${user}"
                              th:method="post"  onsubmit="return validate(this);" style="width:90% ">
                            <div class="row">
                                <div class="col m-2">ІПН:</div>
                                <div class="col m-2"><input style="width: 100%" required id="form-ipn" type="text"
                                                            th:field="*{ipn}"
                                                            maxlength="10" minlength="10"
                                                            pattern="^[0-9]+$"
                                                            name="ipn"/></div>
                            </div>
                            <div class="row">
                                <div class="col m-2">Прізвище:</div>
                                <div class="col m-2"><input style="width: 100%" required id="form-surname" type="text"
                                                            th:field="*{surname}"
                                                            pattern="^[a-zA-Z]+$"
                                                            name="surname"/></div>
                            </div>

                            <div class="row">
                                <div class="col m-2 ">Імʼя:</div>
                                <div class="col m-2"><input style="width: 100%" required id="form-name" type="text"
                                                            th:field="*{name}"
                                                            pattern="^[a-zA-Z]+$"
                                                            name="name"/>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col m-2 ">Імʼя по-Батькові:</div>
                                <div class="col m-2"><input style="width: 100%" id="form-patronim" type="text"
                                                            th:field="*{middleName}"
                                                            pattern="^[a-zA-Z]+$"
                                                            name="patronim"/>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col m-2 ">Телефон: (у форматі +(123)4567890 )</div>
                                <div class="col m-2"><input style="width: 100%" id="form-telephone" type="tel"
                                                            pattern="^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[\s\./0-9]*$"
                                                            th:field="*{telephone}"
                                                            minlength="12"
                                                            maxlength="15"
                                                            required
                                                            name="telephone"/>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col m-2 ">Email:</div>
                                <div class="col m-2"><input style="width: 100%" required id="form-email" type="email"
                                                            th:field="*{email}"
                                                            name="login"/>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col m-2 ">Країна:</div>
                                <div class="col m-2"><input style="width: 100%" required id="form-country" type="text"
                                                            pattern="^[a-zA-Z]+$"
                                                            th:field="*{country}"
                                                            name="country"/>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col m-2 ">Область:</div>
                                <div class="col m-2"><input style="width: 100%" required id="form-district" type="text"
                                                            pattern="^[a-zA-Z]+$"
                                                            th:field="*{district}"
                                                            name="district"/>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col m-2 ">Місто:</div>
                                <div class="col m-2"><input style="width: 100%" required id="form-city" type="text"
                                                            pattern="^[a-zA-Z]+$"
                                                            th:field="*{city}"
                                                            name="city"/>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col">
                                    <div class="col m-2 ">Вулиця:</div>
                                    <div class="col m-2"><input style="width: 100%" required id="form-street" type="text"
                                                                pattern="^[a-zA-Z]+$"
                                                                th:field="*{street}"
                                                                name="street"/>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="col m-2 ">Дім:</div>
                                    <div class="col m-2"><input style="width: 100%" required id="form-house" type="text"
                                                                th:field="*{house}"
                                                                name="house"/>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col m-2">Пароль:</div>
                                <div class="col m-2"><input style="width: 100%" id="form-password" type="password"
                                                            th:field="*{password}"
                                                            name="password"/></div>
                            </div>
                            <div class="row">
                                <div class="col m-2 ">Підтвердити пароль:</div>
                                <div class="col m-2"><input style="width: 100%" id="form-password-repeat"
                                                            type="password"
                                                            name="password-repeat"/></div>
                            </div>

                            <div class="text-right  my-2 mx-2 ">
                                <input
                                        class="btn btn-warning"
                                        type="submit"
                                        value="Зберегти"
                                />
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>
</main>
<script>
    function validate(form) {
        console.log('method start')
        const email = document.getElementById('form-email')?.value || "";
        const password = document.getElementById('form-password')?.value || "";
        const name = document.getElementById('form-name')?.value || "";
        const surname = document.getElementById('form-surname')?.value || "";
        const patronim = document.getElementById('form-patronim')?.value || "";
        const check_password = document.getElementById('form-password-repeat')?.value || "";

        const rePassword = new RegExp("^(?=.*[0-9])(?=.*[a-z]).{8,32}$");
        // const reEmail = new RegExp("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$");
        const reName = new RegExp("^[a-zA-Z]+$");

        if (password !== "" && !rePassword.test(password)){
            alert("Пароль не коректний! Повинен містити не менше 8 символів, літер верхньої та нижньої клавіші, цифр.");
            return false;
        } else if (password !== "" && password !== check_password){
            alert("Паролі не співпадають!");
            return false;
        }
    }
</script>

<script
        src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"
></script>

<script
        src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.1/cjs/popper.min.js"
        integrity="sha256-T3bYsIPyOLpEfeZOX4M7J59ZoDMzuYFUsPiSN3Xcc2M="
        crossorigin="anonymous"
></script>

<script
        src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
        integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
        crossorigin="anonymous"
></script>
</body>
</html>